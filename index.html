<!doctype html>
<html lang="sl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0065BD" />
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
  <title>VZDR≈ΩEVANJE OOK</title>
</head>
<body>

<header class="topbar">
  <div class="brandRow">
    <img src="assets/unior-logo.png" class="brandLogo" alt="UNIOR" />
    <div>
      <div class="title">VZDR≈ΩEVANJE OOK</div>
      <div class="subtitle" id="todayLine"></div>
    </div>
  </div>

  <div class="row" style="gap:8px;">
    <button class="btn ghost" id="syncBtn" title="Sinhronizacija">‚ü≥</button>
    <button class="btn ghost" id="logoutBtn" title="Odjava">‚éã</button>
  </div>
</header>

<!-- ================= LOGIN (PIN) ================= -->
<main id="login" class="card">
  <h2>VZDR≈ΩEVANJE OOK</h2>
  <p class="muted">Vnesi geslo (PIN) za dostop.</p>

  <label class="label">Geslo</label>
  <input class="input" id="password" type="password" inputmode="numeric" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />

  <button class="btn" id="loginBtn">Vstop</button>
  <div class="muted small" id="loginMsg"></div>

  <div class="muted small" style="margin-top:10px;">
    Testni PIN: <b>1989</b>
  </div>
</main>

<!-- ================= APP ================= -->
<main id="app" class="hidden">

  <nav class="bottomnav">
    <button class="navbtn active" data-tab="new">+ Vnos</button>
    <button class="navbtn" data-tab="list">Dnevnik</button>
    <button class="navbtn" data-tab="machine">Stroj</button>
    <button class="navbtn" data-tab="preventiva">Preventiva</button>
    <button class="navbtn" data-tab="settings">Nastavitve</button>
  </nav>

  <!-- ================= NEW / EDIT ================= -->
  <section class="card tabpanel" id="tab-new">
    <div class="row space">
      <h2 id="formTitle">Novi vnos</h2>
      <button class="btn ghost hidden" id="cancelEditBtn">Prekliƒçi</button>
    </div>

    <div class="grid2">
      <div>
        <label class="label">Stanje</label>
        <select class="input" id="state">
          <option value="OPEN">ODPRTO</option>
          <option value="CLOSED">ZAKLJUƒåENO</option>
        </select>
      </div>
      <div>
        <label class="label">Status</label>
        <select class="input" id="status">
          <option value="OK">OK</option>
          <option value="NUJNO">NUJNO</option>
          <option value="CAKA_DELE">ƒåAKA DELE</option>
        </select>
      </div>
    </div>

    <label class="label">ID okvare / ≈°t. naloga</label>
    <input class="input" id="faultId" placeholder="npr. WO-12345 / OKV-2026-01 ..." />

    <label class="label">Stroj / lokacija</label>
    <div class="row">
      <input class="input" id="machine" placeholder="npr. 20141 FPZ UNIOR 1" />
      <button class="btn ghost" id="pickMachineBtn" type="button">üìã</button>
    </div>

    <label class="label">Kaj se dela (opis)</label>
    <textarea class="input" id="work" rows="3" placeholder="npr. menjava cevi, nastavitev senzorja..."></textarea>

    <div class="grid2">
      <div>
        <label class="label">Trajanje (min)</label>
        <input class="input" id="durationMin" inputmode="numeric" placeholder="npr. 45" />
      </div>
      <div>
        <label class="label">SAM / TIM</label>
        <select class="input" id="mode">
          <option value="SAM">SAM</option>
          <option value="TIM">TIM</option>
        </select>
      </div>
    </div>

    <label class="label">Kdo je delal</label>
    <select class="input" id="who">
      <option>HREN PRIMO≈Ω</option>
      <option>FRANCI SEV≈†EK</option>
      <option>MIROSLAV KLEMEN</option>
      <option>DAVID HROVAT</option>
    </select>

    <label class="label">Material</label>
    <input class="input" id="materials" placeholder="npr. O-ring 2 kos, olje 3L..." />

    <label class="label">Opazke</label>
    <textarea class="input" id="obs" rows="2"></textarea>

    <label class="label">Moje razmi≈°ljanje</label>
    <textarea class="input" id="think" rows="2"></textarea>

    <label class="label">Slike</label>
    <input class="input" id="photos" type="file" accept="image/*" capture="environment" multiple />
    <div class="photoRow" id="photoPreview"></div>
    <div class="muted small" id="photoHint"></div>

    <div class="row space" style="margin-top:10px;">
      <button class="btn" id="saveBtn" type="button">Shrani</button>
      <button class="btn ghost" id="clearBtn" type="button">Poƒçisti</button>
    </div>

    <div class="muted small" id="saveMsg"></div>
  </section>

  <!-- ================= LIST ================= -->
  <section class="card tabpanel hidden" id="tab-list">
    <div class="row space">
      <h2>Dnevnik</h2>
      <button class="btn ghost" id="exportCsvBtn" type="button">CSV</button>
    </div>

    <div class="row">
      <input class="input" id="search" placeholder="I≈°ƒçi (stroj, opis, material, ID okvare)..." />
      <button class="btn ghost" id="exportPdfBtn" type="button">PDF</button>
    </div>

    <div class="filters">
      <button class="chip active" data-filter="ALL" type="button">Vse</button>
      <button class="chip" data-filter="OPEN" type="button">Odprto</button>
      <button class="chip" data-filter="WAIT" type="button">ƒåaka dele</button>
      <button class="chip" data-filter="CLOSED" type="button">Zakljuƒçeno</button>
    </div>

    <div class="list" id="entryList"></div>
  </section>

  <!-- ================= MACHINE PROFILE ================= -->
  <section class="card tabpanel hidden" id="tab-machine">
    <div class="row space">
      <h2>Profil stroja</h2>
      <button class="btn ghost" id="machineJumpToNew" type="button">+ Vnos</button>
    </div>

    <div class="row">
      <input class="input" id="machineProfile" placeholder="izberi stroj..." />
      <button class="btn ghost" id="machinePickBtn" type="button">üìã</button>
    </div>

    <div class="card inner">
      <h3>Letna preventiva (1√ó leto)</h3>
      <div class="muted small" id="machinePrevLine">Izberi stroj.</div>

      <div class="row" style="margin-top:8px;">
        <input class="input" id="machinePrevDate" type="date" />
        <button class="btn" id="machinePrevDoneBtn" type="button">Opravljeno</button>
      </div>

      <div class="muted small" id="machinePrevMsg" style="margin-top:6px;"></div>
    </div>

    <div class="card inner">
      <h3>Vnosi za ta stroj</h3>
      <div class="list" id="machineEntries"></div>
    </div>
  </section>

  <!-- ================= PREVENTIVA ================= -->
  <section class="card tabpanel hidden" id="tab-preventiva">
    <h2>Preventiva 1√ó letno</h2>
    <p class="muted small">Oznaƒçi opravljeno letno preventivo za stroj. Aplikacija poka≈æe OK/KMALU/ZAMUJENO.</p>

    <div class="item">
      <div class="row">
        <input class="input" id="prevMachine" placeholder="izberi stroj..." />
        <button class="btn ghost" id="prevPickBtn" type="button">üìã</button>
      </div>
      <div class="row" style="margin-top:8px;">
        <input class="input" id="prevDate" type="date" />
        <button class="btn" id="prevDoneBtn" type="button">Opravljeno</button>
      </div>
      <div class="muted small" id="prevMsg" style="margin-top:6px;"></div>
    </div>

    <div class="list" id="preventivaList"></div>
  </section>

  <!-- ================= SETTINGS ================= -->
  <section class="card tabpanel hidden" id="tab-settings">
    <h2>Nastavitve</h2>

    <div class="card inner">
      <h3>Seznam strojev</h3>
      <p class="muted small">Vsaka vrstica = en stroj/lokacija.</p>
      <textarea class="input" id="machinesList" rows="7"></textarea>
      <button class="btn" id="saveMachinesBtn" type="button">Shrani stroje</button>
      <div class="muted small" id="machinesMsg"></div>
    </div>

    <div class="card inner danger">
      <h3>Opozorilo</h3>
      <p class="muted small">Trenutno je dostop za≈°ƒçiten samo z lokalnim PIN (1989). To ni varno za produkcijo.</p>
    </div>
  </section>

</main>

<!-- ================= MODAL (IZBIRA) ================= -->
<div id="modal" class="modal hidden">
  <div class="modalBox card">
    <div class="row space">
      <h3 id="modalTitle">Izbira</h3>
      <button class="btn ghost" id="modalClose" type="button">‚úñ</button>
    </div>
    <div id="modalBody"></div>
  </div>
</div>

<script type="module" src="app.js"></script>
</body>
</html>
